<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8">

<title>class LibXML::XML::Parser - LibXML</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
<div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  <p class="link"><a href="../../Object.html">Object</a>
</div>

    
    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-c-document">::document</a>
    <li ><a href="#method-c-file">::file</a>
    <li ><a href="#method-c-io">::io</a>
    <li ><a href="#method-c-new">::new</a>
    <li ><a href="#method-c-register_error_handler">::register_error_handler</a>
    <li ><a href="#method-c-string">::string</a>
    <li ><a href="#method-i-parse">#parse</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-LibXML::XML::Parser">
  <h1 id="class-LibXML::XML::Parser" class="class">
    class LibXML::XML::Parser
  </h1>

  <section class="description">
    
<p>The <a href="Parser.html"><code>XML::Parser</code></a> provides a tree based API for processing xml documents, in contract to <a href="Reader.html"><code>XML::Reader</code></a>‘s stream based api and <a href="SaxParser.html"><code>XML::SaxParser</code></a> callback based API.</p>

<p>As a result, parsing a document creates an in-memory document object that consist of any number of <a href="Node.html"><code>XML::Node</code></a> instances.  This is simple and powerful model, but has the major limitation that the size of the document that can be processed is limited by the amount of memory available.  In such cases, it is better to use the <a href="Reader.html"><code>XML::Reader</code></a>.</p>

<p>Using the parser is simple:</p>

<pre class="ruby"><span class="ruby-identifier">parser</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">file</span>(<span class="ruby-string">&#39;my_file&#39;</span>)
<span class="ruby-identifier">doc</span> = <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse</span>
</pre>

<p>You can also parse documents (see <a href="Parser.html#method-c-document"><code>XML::Parser.document</code></a>),  strings (see <a href="Parser.html#method-c-string"><code>XML::Parser.string</code></a>) and io objects (see <a href="Parser.html#method-c-io"><code>XML::Parser.io</code></a>).</p>

  </section>

  <section id="5Buntitled-5D" class="documentation-section">



    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      <div id="attribute-i-context" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">context</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        </div>
      </div>
      <div id="attribute-i-input" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">input</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        </div>
      </div>
    </section>


     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

      <div id="method-c-document" class="method-detail ">
        <div class="method-heading">
          <span class="method-callseq">
            XML::Parser.document(document) &rarr; XML::Parser
          </span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Creates a new parser for the specified document.</p>

<p>Parameters:</p>

<pre>document - A preparsed document.</pre>

          <div class="method-source-code" id="document-source">
            <pre>   <span class="ruby-comment"># File lib/libxml/parser.rb</span>
<span class="line-num">14</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">document</span>(<span class="ruby-identifier">doc</span>)
<span class="line-num">15</span>   <span class="ruby-identifier">context</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">document</span>(<span class="ruby-identifier">doc</span>)
<span class="line-num">16</span>   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">context</span>)
<span class="line-num">17</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-c-file" class="method-detail ">
        <div class="method-heading">
          <span class="method-callseq">
            XML::Parser.file(path) &rarr; XML::Parser
          </span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        <div class="method-heading">
          <span class="method-callseq">
            XML::Parser.file(path, :encoding &rarr; XML::Encoding::UTF_8,
          </span>
        </div>
        <div class="method-heading">
          <span class="method-callseq">
            :options =&gt; XML::Parser::Options::NOENT) &rarr; XML::Parser
          </span>
        </div>

        <div class="method-description">
          <p>Creates a new parser for the specified file or uri.</p>

<p>You may provide an optional hash table to control how the parsing is performed.  Valid options are:</p>

<pre>encoding - The document encoding, defaults to nil. Valid values
           are the encoding constants defined on XML::Encoding.
options - Parser options.  Valid values are the constants defined on
          XML::Parser::Options.  Mutliple options can be combined
          by using Bitwise OR (|).</pre>

          <div class="method-source-code" id="file-source">
            <pre>   <span class="ruby-comment"># File lib/libxml/parser.rb</span>
<span class="line-num">34</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">35</span>   <span class="ruby-identifier">context</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">file</span>(<span class="ruby-identifier">path</span>)
<span class="line-num">36</span>   <span class="ruby-identifier">context</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>]
<span class="line-num">37</span>   <span class="ruby-identifier">context</span>.<span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>]
<span class="line-num">38</span>   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">context</span>)
<span class="line-num">39</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-c-io" class="method-detail ">
        <div class="method-heading">
          <span class="method-callseq">
            XML::Parser.io(io) &rarr; XML::Parser
          </span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        <div class="method-heading">
          <span class="method-callseq">
            XML::Parser.io(io, :encoding &rarr; XML::Encoding::UTF_8,
          </span>
        </div>
        <div class="method-heading">
          <span class="method-callseq">
            :options &rarr; XML::Parser::Options::NOENT
          </span>
        </div>
        <div class="method-heading">
          <span class="method-callseq">
            :base_uri=&quot;http://libxml.org&quot;) &rarr; XML::Parser
          </span>
        </div>

        <div class="method-description">
          <p>Creates a new parser for the specified io object.</p>

<p>Parameters:</p>

<pre>io - io object that contains the xml to parser
base_uri - The base url for the parsed document.
encoding - The document encoding, defaults to nil. Valid values
           are the encoding constants defined on XML::Encoding.
options - Parser options.  Valid values are the constants defined on
          XML::Parser::Options.  Mutliple options can be combined
          by using Bitwise OR (|).</pre>

          <div class="method-source-code" id="io-source">
            <pre>   <span class="ruby-comment"># File lib/libxml/parser.rb</span>
<span class="line-num">58</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">io</span>(<span class="ruby-identifier">io</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">59</span>   <span class="ruby-identifier">context</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">io</span>(<span class="ruby-identifier">io</span>)
<span class="line-num">60</span>   <span class="ruby-identifier">context</span>.<span class="ruby-identifier">base_uri</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:base_uri</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:base_uri</span>]
<span class="line-num">61</span>   <span class="ruby-identifier">context</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>]
<span class="line-num">62</span>   <span class="ruby-identifier">context</span>.<span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>]
<span class="line-num">63</span>   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">context</span>)
<span class="line-num">64</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-c-new" class="method-detail ">
        <div class="method-heading">
          <span class="method-callseq">
            initialize(context) &rarr; XML::Parser
          </span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Creates a new <a href="Parser.html"><code>XML::Parser</code></a> from the specified  <a href="Parser/Context.html"><code>XML::Parser::Context</code></a>.</p>

          <div class="method-source-code" id="new-source">
            <pre>static VALUE rxml_parser_initialize(int argc, VALUE *argv, VALUE self)
{
  VALUE context = Qnil;

  rb_scan_args(argc, argv, &quot;01&quot;, &amp;context);

  if (context == Qnil)
  {
    rb_raise(rb_eArgError, &quot;An instance of a XML::Parser::Context must be passed to XML::Parser.new&quot;);
  }

  rb_ivar_set(self, CONTEXT_ATTR, context);
  return self;
}</pre>
          </div>
        </div>


      </div>

      <div id="method-c-register_error_handler" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">register_error_handler</span><span
            class="method-args">(proc)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          

          <div class="method-source-code" id="register_error_handler-source">
            <pre>   <span class="ruby-comment"># File lib/libxml/parser.rb</span>
<span class="line-num">91</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">register_error_handler</span>(<span class="ruby-identifier">proc</span>)
<span class="line-num">92</span>   <span class="ruby-identifier">warn</span>(<span class="ruby-string">&#39;Parser.register_error_handler is deprecated.  Use Error.set_handler instead&#39;</span>)
<span class="line-num">93</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">proc</span>.<span class="ruby-identifier">nil?</span>
<span class="line-num">94</span>     <span class="ruby-constant">Error</span>.<span class="ruby-identifier">reset_handler</span>
<span class="line-num">95</span>   <span class="ruby-keyword">else</span>
<span class="line-num">96</span>     <span class="ruby-constant">Error</span>.<span class="ruby-identifier">set_handler</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">proc</span>)
<span class="line-num">97</span>   <span class="ruby-keyword">end</span>
<span class="line-num">98</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-c-string" class="method-detail ">
        <div class="method-heading">
          <span class="method-callseq">
            XML::Parser.string(string)
          </span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        <div class="method-heading">
          <span class="method-callseq">
            XML::Parser.string(string, :encoding &rarr; XML::Encoding::UTF_8,
          </span>
        </div>
        <div class="method-heading">
          <span class="method-callseq">
            :options &rarr; XML::Parser::Options::NOENT
          </span>
        </div>
        <div class="method-heading">
          <span class="method-callseq">
            :base_uri=&quot;http://libxml.org&quot;) &rarr; XML::Parser
          </span>
        </div>

        <div class="method-description">
          <p>Creates a new parser by parsing the specified string.</p>

<p>You may provide an optional hash table to control how the parsing is performed.  Valid options are:</p>

<pre>base_uri - The base url for the parsed document.
encoding - The document encoding, defaults to nil. Valid values
           are the encoding constants defined on XML::Encoding.
options - Parser options.  Valid values are the constants defined on
          XML::Parser::Options.  Mutliple options can be combined
          by using Bitwise OR (|).</pre>

          <div class="method-source-code" id="string-source">
            <pre>   <span class="ruby-comment"># File lib/libxml/parser.rb</span>
<span class="line-num">83</span> <span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-identifier">options</span> = {})
<span class="line-num">84</span>   <span class="ruby-identifier">context</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Context</span>.<span class="ruby-identifier">string</span>(<span class="ruby-identifier">string</span>)
<span class="line-num">85</span>   <span class="ruby-identifier">context</span>.<span class="ruby-identifier">base_uri</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:base_uri</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:base_uri</span>]
<span class="line-num">86</span>   <span class="ruby-identifier">context</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:encoding</span>]
<span class="line-num">87</span>   <span class="ruby-identifier">context</span>.<span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:options</span>]
<span class="line-num">88</span>   <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">context</span>)
<span class="line-num">89</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-parse" class="method-detail ">
        <div class="method-heading">
          <span class="method-callseq">
            parse &rarr; XML::Document
          </span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Parse the input <a href="../XML.html"><code>XML</code></a> and create an <a href="Document.html"><code>XML::Document</code></a> with it’s content. If an error occurs, XML::Parser::ParseError is thrown.</p>

          <div class="method-source-code" id="parse-source">
            <pre>static VALUE rxml_parser_parse(VALUE self)
{
  xmlParserCtxtPtr ctxt;
  VALUE context = rb_ivar_get(self, CONTEXT_ATTR);
  
  Data_Get_Struct(context, xmlParserCtxt, ctxt);

  if ((xmlParseDocument(ctxt) == -1 || !ctxt-&gt;wellFormed) &amp;&amp; ! ctxt-&gt;recovery)
  {
    rxml_raise(&amp;ctxt-&gt;lastError);
  }

  rb_funcall(context, rb_intern(&quot;close&quot;), 0);

  return rxml_document_wrap(ctxt-&gt;myDoc);
}</pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.4.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

